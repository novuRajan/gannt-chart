{"version":3,"file":"gantt.min.js","sources":["../js/date-utl.js","../js/updatechart.js","../js/saveEdit.js","../js/gantchart.js"],"sourcesContent":["import GanttChart from \"./gantchart.js\";\nconst svgNS = 'http://www.w3.org/2000/svg';\n\nexport function createGridLines(dateGroup, chartWidth, taskCount) {\n    const gridLines = document.createElementNS(svgNS, 'g');\n    gridLines.classList.add('lines')\n    dateGroup.appendChild(gridLines)\n    for (let i = 0; i <= chartWidth; i += 50) {\n        const line = document.createElementNS(svgNS, 'line');\n        line.setAttribute('x1', i);\n        line.setAttribute('x2', i);\n        line.setAttribute('y1', 35);\n        line.setAttribute('y2', taskCount * 40 + 40);\n        line.classList.add('grid-line');\n        gridLines.appendChild(line);\n    }\n}\n\nexport function createMonthHeadings(dateGroup, dateInfo, chartWidth) {\n    const month = document.createElementNS(svgNS, 'g');\n    month.classList.add('month')\n    dateGroup.appendChild(month)\n    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    let currentMonth = -1;\n\n    for (let i = 0; i <= chartWidth; i += 50) {\n        const currentDate = new Date(dateInfo.startingDate.getTime() + i / 50 * (24 * 60 * 60 * 1000));\n        const monthIndex = currentDate.getMonth();\n        if (monthIndex !== currentMonth) {\n            currentMonth = monthIndex;\n\n            const monthHeading = document.createElementNS(svgNS, 'text');\n            monthHeading.setAttribute('x', i);\n            monthHeading.setAttribute('y', 10);\n            monthHeading.classList.add('month-heading');\n            monthHeading.textContent = months[currentMonth];\n            month.appendChild(monthHeading);\n        }\n    }\n}\n\nexport function createDateScale(dateGroup, dateInfo, chartWidth, taskCount) {\n    const date = document.createElementNS(svgNS, 'g')\n    dateGroup.appendChild(date)\n    date.classList.add('date')\n    const dateScale = document.createElementNS(svgNS, 'text');\n    dateScale.setAttribute('x', '0');\n    dateScale.setAttribute('y', taskCount);\n    date.appendChild(dateScale);\n    const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    for (let i = 0; i <= chartWidth; i += 50) {\n        const currentDate = new Date(dateInfo.startingDate.getTime() + i / 50 * (24 * 60 * 60 * 1000));\n        const day = document.createElementNS(svgNS, 'text');\n        day.setAttribute('x', i - 3);\n        day.setAttribute('y', 25);\n        day.setAttribute('font-size','12px')\n        if(currentDate.getDay() === 0 || currentDate.getDay() === 6){\n            day.setAttribute('fill','red')\n        }\n        day.textContent = daysOfWeek[currentDate.getDay()]\n        date.appendChild(day)\n    }\n}\n\nexport function createDivDateScale(dateInfo, chartWidth, taskCount) {\n    const chartHeight = GanttChart.returnHeight();\n    const dateDiv = document.createElement('div')\n    dateDiv.setAttribute('id','div-date')\n    dateDiv.classList.add('date')\n    const div = document.createElement('div')\n    div.setAttribute('class','date-div')\n    const dateScale = document.createElement('div');\n    const width = GanttChart.returnWidth();\n    console.log(width)\n    const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    for (let i = 0; i <= chartWidth; i += 50) {\n        const currentDate = new Date(dateInfo.startingDate.getTime() + i / 50 * (24 * 60 * 60 * 1000));\n        const day = document.createElement('div');\n      \n        day.setAttribute('font-size','10px')\n        day.setAttribute('y', 30);\n        day.textContent = `${currentDate.getDate()}`;\n        // const day = document.createElement('div');\n        // day.setAttribute('x', i - 3);\n        // day.setAttribute('y', 20);\n        // day.setAttribute('font-size','10px')\n        if(currentDate.getDay() === 0 || currentDate.getDay() === 6){\n            day.setAttribute('style',`position:absolute;left:${i*width/chartWidth}px;color:red`)\n        }\n        else{\n            day.setAttribute('style', `position:absolute;left:${i*width/chartWidth}px`);\n        }\n        // day.dayContent = daysOfWeek[currentDate.getDay()]\n        div.appendChild(day);\n        // dateDiv.appendChild(day)\n    }\n    dateDiv.appendChild(div)\n    return dateDiv;\n}\n","export const updateTaskStartEndDates = (tasks) => {\n  const taskMap = new Map(tasks.map(task => [task.id, task]));\n\n  tasks.forEach(task => {\n    updateTaskDates(task, taskMap);\n    updateSubTaskStartEndDate(task);\n  });\n\n}\nfunction updateTaskDates(task, taskMap) {\n  if (task.dependencies.length === 0) {\n    return; // Base case: no dependencies, nothing to update\n  }\n\n  const dependentTasks = task.dependencies.map(depId => taskMap.get(depId));\n\n  // Find the maximum end date among dependent tasks\n  const maxEndDate = new Date(Math.max(...dependentTasks.map(depTask => new Date(depTask.end))));\n\n  dependentTasks.forEach(dependentTask => {\n    updateTaskDates(dependentTask, taskMap);\n\n    // Calculate the duration of the task\n    const duration = (new Date(task.end) - new Date(task.start)) / (24 * 60 * 60 * 1000);\n\n    // Check if the start date of the dependent task is after the max end date\n    if (new Date(task.start) < maxEndDate) {\n      // Update the start date of the current task based on the maximum end date of dependent tasks\n      task.start = maxEndDate.toISOString().split('T')[0];\n\n      // Update the end date of the current task based on its duration\n      task.end = new Date(new Date(task.start).setDate(new Date(task.start).getDate() + duration)).toISOString().split('T')[0];\n    }\n  });\n\n}\n\nfunction updateSubTaskStartEndDate(task) {\n  // Check if the task has subtasks\n  if (task.subTask && task.subTask.length > 0) {\n    const subTaskMap = new Map(task.subTask.map(subtask => [subtask.id, subtask]));\n    task.subTask.forEach(subTask => {\n      const subDuration = (new Date(subTask.end) - new Date(subTask.start)) / (24 * 60 * 60 * 1000);\n      // Example condition: If subtask start date is less than task start date, update it\n      if (new Date(subTask.start) < new Date(task.start)) {\n        subTask.start = task.start;\n        subTask.end = new Date(new Date(subTask.start).setDate(new Date(task.start).getDate() + subDuration)).toISOString().split('T')[0];\n      }\n      updateTaskDates(subTask, subTaskMap)\n      if (subTask.end > task.end) {\n        task.end = subTask.end\n      }\n    });\n  }\n}\n","import { updateTaskStartEndDates } from \"./updatechart.js\";\nimport GanttChart from \"./gantchart.js\";\n\nconst tooltip = document.createElement('div');\ntooltip.className = 'bar-hover';\ndocument.body.appendChild(tooltip);\nexport function closeModal(modal) {\n    modal.style.display = 'none';\n}\nexport function openAddModal(tasks) {\n    // Create or get the modal element\n    let addModal = document.getElementById('addFormModal');\n    if (!addModal) {\n        addModal = document.createElement('div');\n        addModal.setAttribute('id', 'addFormModal');\n        addModal.setAttribute('class', 'modal')\n        document.body.appendChild(addModal);\n    }\n\n    // Create or get the form element\n    let addTaskForm = document.getElementById('addTaskForm');\n    if (!addTaskForm) {\n        addTaskForm = document.createElement('form');\n        addTaskForm.setAttribute('id', 'addTaskForm');\n        addModal.appendChild(addTaskForm);\n    }\n\n    // Clear existing content in the form\n    addTaskForm.innerHTML = '';\n\n    // Create form elements dynamically and append them to the form\n    createFormField('Task Name:', 'taskName', '', 'text', true, addTaskForm);\n    createFormField('Start Date:', 'startDate', '', 'date', true, addTaskForm);\n    createFormField('End Date:', 'endDate', '', 'date', true, addTaskForm);\n    createFormField('Progress:', 'progress', '', 'number', true, addTaskForm);\n    // Create and append Save Changes button\n    const saveChangesBtn = document.createElement('button');\n    saveChangesBtn.setAttribute('type', 'button');\n    saveChangesBtn.textContent = 'Save Changes';\n    saveChangesBtn.addEventListener('click', function saveChangesHandler() {\n        addTask(tasks);\n    });\n    addTaskForm.appendChild(saveChangesBtn);\n\n    // Create and append Cancel button\n    const cancelBtn = document.createElement('button');\n    cancelBtn.setAttribute('type', 'button');\n    cancelBtn.textContent = 'Cancel';\n    cancelBtn.addEventListener('click', function saveChangesHandler() {\n        closeModal(addModal)\n    });\n    addTaskForm.appendChild(cancelBtn);\n\n    // Display the modal\n    addModal.style.display = 'block';\n\n    // Prevent the contextmenu event from propagating further\n    event.preventDefault();\n}\n//function to update the task array\nexport function addTask(tasks) {\n    const addModal = document.getElementById('addFormModal');\n    const taskName = document.getElementById('taskName').value;\n    const startDate = document.getElementById('startDate').value;\n    const endDate = document.getElementById('endDate').value;\n\n    // Ensure the required fields are not empty\n    if (!taskName || !startDate || !endDate) {\n        alert('Please fill in all fields.');\n        return;\n    }\n\n    const newTask = {\n        id: tasks.length + 1, // Incremental ID\n        name: taskName,\n        start: startDate,\n        end: endDate,\n        progress: 0, // You can set the progress as needed\n        dependencies: [] // You can set dependencies as needed\n    };\n\n    // Add the new task to the existing tasks\n    tasks.push(newTask);\n    length = length + 1; //after adding of each task length should be increased\n    closeModal(addModal);\n    // Call the function with sample data\n    GanttChart.createChart(tasks);\n}\n\n// Function to handle task editing\nexport function editTask(event, task, tasks, allTasks = null) {\n    event.preventDefault();\n    GanttChart.stopDrag();\n\n    // Create or get the modal element\n    let editModal = document.getElementById('editModal');\n    if (!editModal) {\n        editModal = document.createElement('div');\n        editModal.setAttribute('id', 'editModal');\n        editModal.setAttribute('class', 'modal')\n        document.body.appendChild(editModal);\n    }\n\n    // Create or get the form element\n    let editTaskForm = document.getElementById('editTaskForm');\n    if (!editTaskForm) {\n        editTaskForm = document.createElement('form');\n        editTaskForm.setAttribute('id', 'editTaskForm');\n        editModal.appendChild(editTaskForm);\n    }\n\n    // Clear existing content in the form\n    editTaskForm.innerHTML = '';\n\n    // Create form elements dynamically and append them to the form\n    createFormField('Task Name:', 'editTaskName', task.name, 'text', true, editTaskForm);\n    createFormField('Start Date:', 'editStartDate', task.start, 'date', true, editTaskForm);\n    createFormField('End Date:', 'editEndDate', task.end, 'date', true, editTaskForm);\n    createFormField('Progress:', 'editProgress', task.progress, 'number', true, editTaskForm);\n\n    // Clear existing options\n    const editDependenciesSelect = document.createElement('select');\n    editDependenciesSelect.setAttribute('id', 'editDependencies');\n    editDependenciesSelect.setAttribute('multiple', 'multiple'); // Set the multiple attribute\n    editTaskForm.appendChild(editDependenciesSelect);\n\n    // Display dependencies in the modal as select options\n    tasks.forEach(availableTask => {\n        // Check if the available task is not the current task and not dependent on the current task\n        if (availableTask.id !== task.id && !isTaskDependent(task, availableTask, tasks)) {\n            const option = document.createElement('option');\n            option.value = availableTask.id;\n            option.textContent = availableTask.name;\n            if (task.dependencies.includes(availableTask.id)) {\n                // If the task is already a dependency, mark it as selected\n                option.selected = true;\n            }\n            editDependenciesSelect.appendChild(option);\n        }\n    });\n\n    // Store the task ID in a data attribute of the form\n    editTaskForm.setAttribute('data-task-id', task.id);\n\n    // Create and append Save Changes button\n    const saveChangesBtn = document.createElement('button');\n    saveChangesBtn.setAttribute('type', 'button');\n    saveChangesBtn.textContent = 'Save Changes';\n    saveChangesBtn.addEventListener('click', function saveChangesHandler() {\n        // Call your function to save the edited task data\n        saveEditedTask(tasks, allTasks);\n        // Close the modal after saving changes\n        closeModal(editModal);\n    });\n    editTaskForm.appendChild(saveChangesBtn);\n\n    // Create and append Cancel button\n    const cancelBtn = document.createElement('button');\n    cancelBtn.setAttribute('type', 'button');\n    cancelBtn.textContent = 'Cancel';\n    cancelBtn.addEventListener('click', function saveChangesHandler() {\n        closeModal(editModal);\n    });\n    editTaskForm.appendChild(cancelBtn);\n\n    // Display the modal\n    editModal.style.display = 'block';\n\n    // Prevent the contextmenu event from propagating further\n    event.preventDefault();\n}\n\nfunction createFormField(labelText, inputId, inputValue, inputType, required, parentName) {\n    const label = document.createElement('label');\n    label.setAttribute('for', inputId);\n    label.textContent = labelText;\n\n    const input = document.createElement('input');\n    input.setAttribute('type', inputType);\n    input.setAttribute('id', inputId);\n    input.setAttribute('name', inputId);\n    input.value = inputValue;\n    input.required = required;\n\n    // Append label and input to the form\n    parentName.appendChild(label);\n    parentName.appendChild(input);\n}\n\n\n\n// Function to check if a task is dependent on another task\nexport function isTaskDependent(currentTask, otherTask, allTasks) {\n    return otherTask.dependencies.includes(currentTask.id) || otherTask.dependencies.some(depId => isTaskDependent(currentTask, allTasks[depId - 1], allTasks));\n}\n\n// Function to save edited task\nexport function saveEditedTask(tasks, alltasks = null) {\n    const editTaskForm = document.getElementById('editTaskForm');\n    const editTaskNameInput = document.getElementById('editTaskName');\n    const editStartDateInput = document.getElementById('editStartDate');\n    const editEndDateInput = document.getElementById('editEndDate');\n    const editProgress = document.getElementById('editProgress');\n    const editDependenciesSelect = document.getElementById('editDependencies');\n\n    // Retrieve the edited values\n    const editedTaskName = editTaskNameInput.value;\n    const editedStartDate = editStartDateInput.value;\n    const editedEndDate = editEndDateInput.value;\n    const progress = editProgress.value;\n    // Retrieve the task ID from the data attribute\n    const taskId = parseInt(editTaskForm.getAttribute('data-task-id'), 10);\n\n    // Retrieve the selected dependencies from the updated select element\n    const selectedDependencies = Array.from(editDependenciesSelect.selectedOptions).map(option => parseInt(option.value, 10));\n\n    // Find the task in the array and update its properties\n    const editedTaskIndex = tasks.findIndex(task => task.id === taskId);\n    if (editedTaskIndex !== -1) {\n        tasks[editedTaskIndex].name = editedTaskName;\n        tasks[editedTaskIndex].start = editedStartDate;\n        tasks[editedTaskIndex].end = editedEndDate;\n        tasks[editedTaskIndex].progress = progress > 100 ? 100 : progress;\n        tasks[editedTaskIndex].dependencies = selectedDependencies;\n    }\n\n    // Update the Gantt chart with the new data\n    updateTaskStartEndDates(tasks);\n    // Call the function with sample data\n    if (alltasks) {\n        GanttChart.createChart(alltasks);\n    }\n    else {\n        GanttChart.createChart(tasks);\n    }\n}\n\nexport function showTaskDetails(task, allTasks) {\n    const dependentTaskNames = task.dependencies.map(depId => allTasks[depId - 1].name);\n    const dependentTaskInfo = dependentTaskNames.length > 0 ? `Dependencies: ${dependentTaskNames.join(', ')}` : '';\n\n    tooltip.innerHTML = `\n    Task: ${task.name}<br>\n    Start: ${task.start}<br>\n    End: ${task.end}<br>\n    ${dependentTaskInfo}\n    `;\n    tooltip.style.left = `${event.pageX}px`;\n    tooltip.style.top = `${event.pageY}px`;\n    tooltip.style.display = 'block';\n}\n\nexport function hideTaskDetails() {\n    tooltip.style.display = 'none';\n}","import { createGridLines, createMonthHeadings, createDateScale, createDivDateScale } from './date-utl.js';\nimport { updateTaskStartEndDates } from './updatechart.js';\nimport { hideTaskDetails, showTaskDetails, editTask, openAddModal, addTask } from './saveEdit.js';\n\nconst svgNS = 'http://www.w3.org/2000/svg';\nexport default class GanttChart {\n  constructor() {\n    this.dateInfo;\n    this.taskCount;\n    this.isDragging = false;\n    this.initialX;\n    this.initialWidth;\n    this.isDragStart;\n    // Variables to store the current task and progress bar\n    this.currentTaskRect;\n    this.currentProgressRect;\n    this.dragMoveListener = null;\n    this.length;\n    this.dependentTask;\n    this.tasks;\n    this.allTask;\n    this.chartWidth;\n    this.taskBar;\n  }\n\n  getTotalLength(tasks) {\n    return tasks.reduce((total, task) => {\n      return total + 1 + (task.subTask ? this.getTotalLength(task.subTask) : 0);\n    }, 0);\n  }\n\n  createButton(tasks) {\n    const button = document.createElement('button');\n    const btn_add_svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n    // appending svg icon start\n    btn_add_svg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n    btn_add_svg.setAttribute('height', '10');\n    btn_add_svg.setAttribute('viewBox', '0 -960 960 960');\n    btn_add_svg.setAttribute('width', '10');\n    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path.setAttribute('d', 'M680-80v-120H560v-80h120v-120h80v120h120v80H760v120h-80Zm-480-80q-33 0-56.5-23.5T120-240v-480q0-33 23.5-56.5T200-800h40v-80h80v80h240v-80h80v80h40q33 0 56.5 23.5T760-720v244q-20-3-40-3t-40 3v-84H200v320h280q0 20 3 40t11 40H200Zm0-480h480v-80H200v80Zm0 0v-80 80Z');\n    btn_add_svg.appendChild(path);\n    button.appendChild(btn_add_svg);\n    // appending svg icon End\n\n    button.setAttribute('class', 'add-button')\n    button.setAttribute('title', 'Add task');\n\n    // button.textContent = 'Add Task'; // Set the button text\n    button.addEventListener('click', () => {\n      openAddModal(tasks);\n    });\n    return button;\n  }\n\n  createGanttChart(tasks) {\n    updateTaskStartEndDates(tasks);\n    const chartContainer = document.getElementById('chart');\n    // Create a button element\n    const overallDiv = document.createElement('div'); // Create a div element for the SVG ,date and side bar\n    overallDiv.setAttribute('class', 'top-class');\n    overallDiv.setAttribute('id', 'overall-div');\n    const addTask = document.createElement('div');\n    addTask.setAttribute('class', 'add-tasks');\n    const sideBar = document.createElement('div');\n    sideBar.setAttribute('class', 'sidebar');\n    this.taskBar = document.createElement('div');\n    this.taskBar.setAttribute('class', 'taskbar');\n    sideBar.appendChild(this.taskBar);\n    const button = this.createButton(tasks)\n    let svg = chartContainer.querySelector('svg');\n    // Check if the SVG element already exists\n    if (!svg) {\n      // Append the button to the parent container of the SVG\n      addTask.appendChild(button);\n      overallDiv.appendChild(addTask);\n      overallDiv.appendChild(sideBar);\n      // If not, create a new SVG da\n      svg = this.createSVG(tasks);\n      overallDiv.appendChild(svg);\n      chartContainer.appendChild(overallDiv);\n      const Datediv = createDivDateScale(this.dateInfo, this.chartWidth, this.length);\n      overallDiv.insertBefore(Datediv, svg);\n    } else {\n      this.updateGanttChartContent(svg, tasks);\n    }\n  }\n\n  createSVG(tasks) {\n    const svg = document.createElementNS(svgNS, 'svg');\n    svg.setAttribute('id', 'mySvg');\n    // svg.setAttribute('min-width', '100%');\n    // svg.setAttribute('height', '200%');\n    const dateGroup = document.createElementNS(svgNS, 'g'); // Create a group element for the task\n    dateGroup.setAttribute('class', 'date-groups');\n    svg.appendChild(dateGroup);\n    this.dateInfo = this.calculateDateInfo(tasks);\n    const chartWidth = this.calculateChartWidth(this.dateInfo);\n    this.length = this.getTotalLength(tasks);\n\n    svg.setAttribute('viewBox', `0 0 ${chartWidth} ${this.length * 40 + 40}`);\n\n    createGridLines(dateGroup, chartWidth, this.length);\n    createMonthHeadings(dateGroup, this.dateInfo, chartWidth);\n    createDateScale(dateGroup, this.dateInfo, chartWidth, this.length);\n    this.createTaskBars(svg, tasks, this.dateInfo);\n    setTimeout(() => {\n      this.drawDependencyLine(svg, tasks);\n    }, 0);\n    return svg;\n  }\n\n  calculateDateInfo(tasks) {\n    const startDates = tasks.map(task => new Date(task.start));\n    const endDates = tasks.map(task => new Date(task.end));\n\n    const minDate = new Date(Math.min(...startDates));\n    const startingDate = new Date(minDate);\n    startingDate.setDate(minDate.getDate() - 5);\n\n    const maxDate = new Date(Math.max(...endDates));\n    const dateDiff = (maxDate - minDate) / (24 * 60 * 60 * 1000);\n\n    let multiplier = dateDiff > 100 ? 54 : dateDiff > 30 ? 60 : 120;\n\n    return { startingDate, maxDate, multiplier };\n  }\n\n  calculateChartWidth(dateInfo) {\n    this.chartWidth = (dateInfo.maxDate - dateInfo.startingDate) / (24 * 60 * 60 * 1000) * dateInfo.multiplier;\n    return this.chartWidth;\n  }\n\n  createTaskBars(svg, tasks, dateInfo) {\n    let customIndex = 0;\n\n    tasks.forEach((task, index) => {\n      const sideBarDiv = this.createSideBar();\n\n      const taskGroup = document.createElementNS(svgNS, 'g'); // Create a group element for the task\n      taskGroup.setAttribute('class', 'tasks');\n      svg.appendChild(taskGroup);\n      const mainTask = document.createElement('div');\n      mainTask.setAttribute('class', 'main-task');\n      const dependentTaskEnd = Math.max(...task.dependencies.map(depId => new Date(tasks[depId - 1].end)));\n      const startOffset = Math.max((dependentTaskEnd - dateInfo.startingDate) / (24 * 60 * 60 * 1000) * 50, (new Date(task.start) - dateInfo.startingDate) / (24 * 60 * 60 * 1000) * 50);\n      const duration = (new Date(task.end) - new Date(task.start)) / (24 * 60 * 60 * 1000) * 50;\n\n      const rect = document.createElementNS(svgNS, 'rect');\n      rect.setAttribute('x', startOffset);\n      rect.setAttribute('y', customIndex * 40 + 40);\n      rect.setAttribute('width', duration);\n      rect.setAttribute('height', 30);\n      rect.setAttribute('fill', '#3498db');\n      rect.setAttribute('id', `task-${task.id}`); // Set the id attribute\n      taskGroup.appendChild(rect);\n\n      const progressWidth = (duration * task.progress) / 100;\n      const progressRect = document.createElementNS(svgNS, 'rect');\n      progressRect.setAttribute('x', startOffset);\n      progressRect.setAttribute('y', customIndex * 40 + 40);\n      progressRect.setAttribute('width', progressWidth);\n      progressRect.setAttribute('height', 30);\n      progressRect.setAttribute('fill', '#2ecc71');\n      taskGroup.appendChild(progressRect);\n\n      const text = document.createElementNS(svgNS, 'text');\n      text.setAttribute('x', startOffset + 5);\n      text.setAttribute('y', customIndex * 40 + 60);\n      text.textContent = task.name;\n      taskGroup.appendChild(text);\n      // div added for the task \n      mainTask.setAttribute('style', `top:${(customIndex * 40 + 40) * 770 / (this.length * 40 + 40)}px;height:auto;`)\n      mainTask.textContent = task.name;\n      this.taskBar.appendChild(mainTask);\n      // Render subtasks\n      if (task.subTask && task.subTask.length > 0) {\n        const subTaskGroup = document.createElementNS(svgNS, 'g'); // Create a group element for the task\n        subTaskGroup.setAttribute('class', 'subtask')\n        taskGroup.appendChild(subTaskGroup);\n        task.subTask.forEach((subtask, subIndex) => {\n          const subTask = document.createElement('div');\n          subTask.setAttribute('class', 'sub-task');\n          const subDependentTaskEnd = Math.max(...subtask.dependencies.map(depId => new Date(task.subTask[depId - 1].end)));\n          const subStartOffset = Math.max((subDependentTaskEnd - dateInfo.startingDate) / (24 * 60 * 60 * 1000) * 50, (new Date(subtask.start) - dateInfo.startingDate) / (24 * 60 * 60 * 1000) * 50);\n          const subDuration = (new Date(subtask.end) - new Date(subtask.start)) / (24 * 60 * 60 * 1000) * 50;\n\n          const subRect = document.createElementNS(svgNS, 'rect');\n          subRect.setAttribute('class', 'subtask')\n          subRect.setAttribute('x', subStartOffset);\n          subRect.setAttribute('y', (subIndex + customIndex + 1) * 40 + 40);\n          subRect.setAttribute('width', subDuration);\n          subRect.setAttribute('height', 15);\n          subRect.setAttribute('fill', '#e74c3c');\n          subRect.setAttribute('id', `subtask-${task.id}-${subtask.id}`); // Set the id attribute for subtasks\n          subTaskGroup.appendChild(subRect);\n\n          const subProgressWidth = (subDuration * subtask.progress) / 100;\n          const subProgressRect = document.createElementNS(svgNS, 'rect');\n          subProgressRect.setAttribute('class', 'subtask-progress')\n          subProgressRect.setAttribute('x', subStartOffset);\n          subProgressRect.setAttribute('y', (subIndex + customIndex + 1) * 40 + 40);\n          subProgressRect.setAttribute('width', subProgressWidth);\n          subProgressRect.setAttribute('height', 15);\n          subProgressRect.setAttribute('fill', '#c0392b');\n          subTaskGroup.appendChild(subProgressRect);\n\n          const subText = document.createElementNS(svgNS, 'text');\n          subText.setAttribute('x', subStartOffset + 5);\n          subText.setAttribute('y', (subIndex + customIndex + 1) * 40 + 50);\n          subText.textContent = subtask.name;\n          subText.setAttribute('font-size', '10px');\n          subTaskGroup.appendChild(subText);\n\n          // div added for the subtask\n          subTask.setAttribute('style', `top:${((subIndex + customIndex + 1) * 40 + 50) * 770 / (this.length * 40 + 40)}px;height:auto;`)\n          subTask.textContent = subtask.name;\n          this.taskBar.appendChild(subTask);\n\n          subText.addEventListener('mouseover', () => showTaskDetails(subtask, task.subTask));\n          subRect.addEventListener('mouseover', () => showTaskDetails(subtask, task.subTask));\n          subRect.addEventListener('mouseout', hideTaskDetails);\n\n          subProgressRect.addEventListener('mouseover', () => showTaskDetails(subtask, task.subTask));\n          subProgressRect.addEventListener('mouseout', hideTaskDetails);\n\n          subRect.addEventListener('contextmenu', (event) => {\n            event.preventDefault();\n            editTask(event, subtask, task.subTask, tasks);\n          });\n          subProgressRect.addEventListener('contextmenu', (event) => {\n            event.preventDefault();\n            editTask(event, subtask, task.subTask, tasks);\n          });\n          subText.addEventListener('contextmenu', (event) => {\n            event.preventDefault();\n            editTask(event, subtask, task.subTask, tasks);\n          });\n          subRect.addEventListener('mousedown', (event) => {\n            event.preventDefault();\n            this.startDrag(event, subRect, subProgressRect, subtask, task.subTask, tasks);\n          });\n          subProgressRect.addEventListener('mousedown', (event) => {\n            event.preventDefault();\n            this.startDrag(event, subRect, subProgressRect, subtask, task.subTask, tasks)\n          });\n          subText.addEventListener('mousedown', (event) => {\n            event.preventDefault();\n            this.startDrag(event, subRect, subProgressRect, subtask, task.subTask, tasks);\n          });\n        });\n      }\n\n      // Add event listeners for both rectangle and progress bar\n      text.addEventListener('mouseover', () => showTaskDetails(task, tasks));\n      rect.addEventListener('mouseover', () => showTaskDetails(task, tasks));\n      rect.addEventListener('mouseout', hideTaskDetails);\n\n      progressRect.addEventListener('mouseover', () => showTaskDetails(task, tasks));\n      progressRect.addEventListener('mouseout', hideTaskDetails);\n\n      rect.addEventListener('contextmenu', (event) => {\n        event.preventDefault();\n        editTask(event, task, tasks);\n      });\n      progressRect.addEventListener('contextmenu', (event) => {\n        event.preventDefault();\n        editTask(event, task, tasks);\n      });\n      text.addEventListener('contextmenu', (event) => {\n        event.preventDefault();\n        editTask(event, task, tasks);\n      });\n      // Add event listeners for dragging to edit start and end dates\n      rect.addEventListener('mousedown', (event) => {\n        event.preventDefault();\n        this.startDrag(event, rect, progressRect, task, tasks);\n      });\n      progressRect.addEventListener('mousedown', (event) => {\n        event.preventDefault();\n        this.startDrag(event, rect, progressRect, task, tasks)\n      });\n      text.addEventListener('mousedown', (event) => {\n        event.preventDefault();\n        this.startDrag(event, rect, progressRect, task, tasks);\n      });\n      document.addEventListener('mouseup', (event) => {\n        this.handleMouseUp(this.taskRect, this.dependentTask, this.tasks, this.dateInfo, this.allTasks);\n      });\n      // task below the subtask\n      customIndex = customIndex + 1;\n      if (task.subTask && task.subTask.length > 0) {\n        customIndex = customIndex + task.subTask.length;\n      }\n    });\n  }\n\n  throttle(func, limit) {\n    let inThrottle;\n    return function () {\n      const args = arguments;\n      const context = this;\n      if (!inThrottle) {\n        func.apply(context, args);\n        inThrottle = true;\n        setTimeout(() => (inThrottle = false), limit);\n      }\n    };\n  }\n\n  isExceedingDepenentEndDate(sartDate, dependentTask, tasks) {\n    const tasksWithDesiredIds = tasks.filter(task =>\n      dependentTask.dependencies.includes(task.id)\n    );\n    const endDates = tasksWithDesiredIds.map(task => new Date(task.end));\n    const maxDate = new Date(Math.max(...endDates))\n    if (maxDate > sartDate) {\n      return 1;\n    } else {\n      return 0;\n    }\n  }\n\n  handleDragMove(event, taskRect, progress, dependentTask, tasks, allTasks = null) {\n    event.preventDefault();\n    if (this.isDragging) {\n      this.updateTaskBarPosition(event.clientX, taskRect, progress, dependentTask, tasks, allTasks);\n    }\n  }\n\n  startDrag(event, taskRect, taskProgressRect, dependentTask, task, allTasks = null) {\n    this.dependentTask = dependentTask;\n    this.tasks = task;\n    this.allTasks = allTasks;\n    document.body.classList.add('dragging');\n    hideTaskDetails\n    this.isDragging = true;\n    this.initialX = event.clientX;\n    this.initialWidth = parseFloat(taskRect.getAttribute('width'));\n    this.isDragStart = event.clientX < taskRect.getBoundingClientRect().left + this.initialWidth / 2;\n\n    // Set the current task and progress bar\n    this.currentTaskRect = taskRect;\n    this.currentProgressRect = taskProgressRect;\n    this.dragMoveListener = this.throttle((event) => {\n      this.handleDragMove(event, this.currentTaskRect, this.currentProgressRect, dependentTask, task, allTasks);\n    }, 16);\n    event.preventDefault();\n    document.addEventListener('mousemove', this.dragMoveListener);\n\n  }\n\n  updateTaskBarPosition(clientX, taskRect, progress, dependentTask, tasks, allTasks) {\n    const width = this.getWidth()\n    const deltaX = (clientX - this.initialX) / (width / this.chartWidth)// Adjust the sensitivity factor \n    if (this.isDragStart) {\n      // Dragging start handle\n      const newStartOffset = (new Date(dependentTask.start) - this.dateInfo.startingDate) / (24 * 60 * 60 * 1000) * 50 + deltaX;\n      const startDate = new Date(this.dateInfo.startingDate.getTime() + (parseFloat(taskRect.getAttribute('x'))) / 50 * (24 * 60 * 60 * 1000));\n\n      if (this.isExceedingDepenentEndDate(startDate, dependentTask, tasks)) {\n        alert('Start Date has exceeded its dependent EndDate');\n        document.body.classList.remove('dragging');\n        this.isDragging = false;\n        const updatedTaskIndex = tasks.findIndex(t => t.id === dependentTask.id);\n        if (updatedTaskIndex !== -1) {\n          const newEndDate = new Date(startDate.getTime() + (parseFloat(taskRect.getAttribute('width')) / 51) * (24 * 60 * 60 * 1000));\n\n          // Update the properties of the task in the array\n          tasks[updatedTaskIndex].start = startDate.toISOString().split('T')[0];\n          tasks[updatedTaskIndex].end = newEndDate.toISOString().split('T')[0];\n          document.removeEventListener('mousemove', this.dragMoveListener)\n          // Update the Gantt chart with the new data\n          updateTaskStartEndDates(tasks);\n          if (allTasks) {\n            this.createGanttChart(allTasks);\n          }\n          else {\n            this.createGanttChart(tasks);\n          }\n        }\n      }\n\n      // const endDate = new Date(dateInfo.startingDate.getTime() + (parseFloat(taskRect.getAttribute('x')) + parseFloat(taskRect.getAttribute('width'))) / 50 * (24 * 60 * 60 * 1000));\n\n      const maxStartOffset = parseFloat(taskRect.getAttribute('x')) + parseFloat(taskRect.getAttribute('width'));\n      const adjustedStartOffset = Math.min(newStartOffset, maxStartOffset);\n      const adjustedWidth = maxStartOffset - adjustedStartOffset;\n      taskRect.setAttribute('x', newStartOffset);\n      taskRect.setAttribute('width', adjustedWidth);\n\n      progress.setAttribute('x', newStartOffset);\n      progress.setAttribute('width', adjustedWidth * dependentTask.progress / 100);\n\n    } else {\n      // Dragging end handle\n      const newWidth = this.initialWidth + deltaX;\n      taskRect.setAttribute('width', newWidth);\n      progress.setAttribute('width', newWidth * dependentTask.progress / 100);\n    }\n    this.taskRect = taskRect;\n  }\n\n  handleMouseUp(taskRect, dependentTask, tasks, dateInfo, allTasks = null) {\n    document.body.classList.remove('dragging');\n    document.removeEventListener('mousemove', this.dragMoveListener)\n    if (this.isDragging) {\n      this.isDragging = false\n      // Find the task in the array and update its properties\n      const updatedTaskIndex = tasks.findIndex((t) => t.id === dependentTask.id);\n      if (updatedTaskIndex !== -1) {\n        const newStartDate = new Date(\n          dateInfo.startingDate.getTime() +\n          (parseFloat(taskRect.getAttribute('x')) / 50) * (24 * 60 * 60 * 1000)\n        );\n        const newEndDate = new Date(\n          newStartDate.getTime() +\n          (parseFloat(taskRect.getAttribute('width')) / 50) * (24 * 60 * 60 * 1000)\n        );\n        // Update the properties of the task in the array\n        tasks[updatedTaskIndex].start = newStartDate.toISOString().split('T')[0];\n        tasks[updatedTaskIndex].end = newEndDate.toISOString().split('T')[0];\n        // Update the Gantt chart with the new data\n        updateTaskStartEndDates(tasks);\n        if (allTasks) {\n          this.createGanttChart(allTasks);\n        } else {\n          this.createGanttChart(tasks);\n        }\n\n      }\n    }\n\n  }\n\n  updateGanttChartContent(svg, tasks) {\n    const chartContainer = document.getElementById('overall-div');\n    //clear the excisting date div\n    let Datediv = document.getElementById('div-date');\n    chartContainer.removeChild(Datediv);\n    // Clear existing content\n    while (svg.firstChild) {\n      svg.removeChild(svg.firstChild);\n    }\n    this.length = this.getTotalLength(tasks)\n    // Update the content with the new tasks\n    this.dateInfo = this.calculateDateInfo(tasks);\n    const chartWidth = this.calculateChartWidth(this.dateInfo);\n    const dateGroup = document.createElementNS(svgNS, 'g'); // Create a group element for the task\n    dateGroup.setAttribute('class', 'date-groups');\n    svg.appendChild(dateGroup);\n\n    svg.setAttribute('viewBox', `0 0 ${chartWidth} ${this.length * 40 + 40}`);\n\n    createGridLines(dateGroup, chartWidth, this.length);\n    createMonthHeadings(dateGroup, this.dateInfo, chartWidth);\n    createDateScale(dateGroup, this.dateInfo, chartWidth, this.length);\n    Datediv = createDivDateScale(this.dateInfo, this.chartWidth, this.length);\n    chartContainer.insertBefore(Datediv, svg);\n    this.createTaskBars(svg, tasks, this.dateInfo);\n    this.drawDependencyLine(svg, tasks)\n  }\n\n  drawDependencyLine(svg, tasks) {\n    const svgNS = 'http://www.w3.org/2000/svg';\n    const arrowheadSize = 5;\n\n    tasks.forEach((task, index) => {\n      if (task.dependencies && task.dependencies.length > 0) {\n        task.dependencies.forEach((dependencyId) => {\n          const dependentTask = tasks.find((t) => t.id === dependencyId);\n          if (dependentTask) {\n            const startTaskElement = document.getElementById(`task-${dependentTask.id}`);\n            const endTaskElement = document.getElementById(`task-${task.id}`);\n\n            if (startTaskElement && endTaskElement) {\n              const startOffset = parseFloat(startTaskElement.getAttribute('width')) + parseFloat(startTaskElement.getAttribute('x'));\n              const x1 = startOffset;\n              const y1 = parseFloat(startTaskElement.getAttribute('y'));\n              const x2 = parseFloat(endTaskElement.getAttribute('x')) + parseFloat(endTaskElement.getAttribute('width')) / 2;\n\n              // Draw horizontal line\n              const lineHorizontal = this.createSvgLine(x1, y1 + parseFloat(endTaskElement.getAttribute('height')) / 2, x2, y1 + parseFloat(endTaskElement.getAttribute('height')) / 2);\n              svg.appendChild(lineHorizontal);\n\n              //if blocked task is above the blocker task in the chart ,add extra height to the vertical line\n              const isDependentAfterTask = dependentTask.id > task.id;\n              const extraHeight = isDependentAfterTask ? parseFloat(endTaskElement.getAttribute('height')) : 0;\n\n\n              // Draw vertical line\n              const lineVertical = this.createSvgLine(x2, y1 + parseFloat(endTaskElement.getAttribute('height')) / 2, x2, parseFloat(endTaskElement.getAttribute('y')) + extraHeight);\n              svg.appendChild(lineVertical);\n\n              // Draw arrowhead\n              const arrowheadY = isDependentAfterTask ? parseFloat(endTaskElement.getAttribute('y')) + parseFloat(endTaskElement.getAttribute('height')) : parseFloat(endTaskElement.getAttribute('y'));\n              const arrowDirection = isDependentAfterTask ? 'up' : 'down';\n              const arrowhead = this.createArrowhead(x2, arrowheadY, arrowheadSize, arrowDirection);\n              svg.appendChild(arrowhead);\n            }\n          }\n        });\n      }\n\n      if (task.subTask) {\n        task.subTask.forEach((subtask, subindex) => {\n          if (subtask.dependencies && subtask.dependencies.length > 0) {\n            subtask.dependencies.forEach((dependencyId) => {\n              const dependentTask = task.subTask.find((t) => t.id === dependencyId);\n              if (dependentTask) {\n                const startTaskElement = document.getElementById(`subtask-${task.id}-${dependentTask.id}`);\n                const endTaskElement = document.getElementById(`subtask-${task.id}-${subtask.id}`);\n\n                if (startTaskElement && endTaskElement) {\n                  const startOffset = parseFloat(startTaskElement.getAttribute('width')) + parseFloat(startTaskElement.getAttribute('x'));\n                  const x1 = startOffset;\n                  const y1 = parseFloat(startTaskElement.getAttribute('y'));\n                  const x2 = parseFloat(endTaskElement.getAttribute('x')) + parseFloat(endTaskElement.getAttribute('width')) / 2;\n\n                  // Draw horizontal line\n                  const lineHorizontal = this.createSvgLine(x1, y1 + parseFloat(endTaskElement.getAttribute('height')) / 2, x2, y1 + parseFloat(endTaskElement.getAttribute('height')) / 2);\n                  svg.appendChild(lineHorizontal);\n\n                  //if blocked subtask is above the blocker task in the chart ,add extra height to the vertical line\n                  const isDependentAfterTask = dependentTask.id > subtask.id;\n                  const extraHeight = isDependentAfterTask ? parseFloat(endTaskElement.getAttribute('height')) : 0;\n\n                  // Draw vertical line\n                  const lineVertical = this.createSvgLine(x2, y1 + parseFloat(endTaskElement.getAttribute('height')) / 2, x2, parseFloat(endTaskElement.getAttribute('y')) + extraHeight);\n                  svg.appendChild(lineVertical);\n\n                  // Draw arrowhead\n                  const arrowheadY = dependentTask.id > subtask.id ? parseFloat(endTaskElement.getAttribute('y')) + parseFloat(endTaskElement.getAttribute('height')) : parseFloat(endTaskElement.getAttribute('y'));\n                  const arrowDirection = isDependentAfterTask ? 'up' : 'down';\n                  const arrowhead = this.createArrowhead(x2, arrowheadY, arrowheadSize, arrowDirection);\n                  svg.appendChild(arrowhead);\n                }\n              }\n            });\n          }\n        });\n      }\n    });\n  }\n\n  createSvgLine(x1, y1, x2, y2) {\n    const line = document.createElementNS(svgNS, 'line');\n    line.setAttribute('x1', x1);\n    line.setAttribute('y1', y1);\n    line.setAttribute('x2', x2);\n    line.setAttribute('y2', y2);\n    line.classList.add('dependency-line');\n    return line;\n  }\n\n  createArrowhead(x, y, size, arrowDirection) {\n    const arrowhead = document.createElementNS(svgNS, 'polygon');\n    const points = arrowDirection === \"down\"\n      ? `${x},${y - size} ${x - size},${y - size} ${x},${y} ${x + size},${y - size}`\n      : `${x - size},${y + size} ${x},${y} ${x + size},${y + size}`;\n    arrowhead.setAttribute('points', points);\n    arrowhead.classList.add('dependency-arrowhead');\n    return arrowhead;\n  }\n\n  createSideBar() {\n    const sidebar = document.createElement('div');\n    sidebar.setAttribute('class', 'sidebar');\n    return sidebar;\n  }\n\n  getWidth() {\n    var svgElement = document.getElementById('mySvg');\n\n    if (svgElement) {\n      var svgWidthInPixels = window.getComputedStyle(svgElement).width;\n      var numericWidth = parseFloat(svgWidthInPixels);\n      return numericWidth;\n    } else {\n      return null;\n    }\n  }\n\n  getheight() {\n    var svgElement = document.getElementById('mySvg');\n\n    if (svgElement) {\n      var svgWidthInPixels = window.getComputedStyle(svgElement).height;\n      var numericWidth = parseFloat(svgWidthInPixels);\n      return numericWidth;\n    } else {\n      return null;\n    }\n  }\n\n  static returnHeight() {\n    const height = new GanttChart();\n    return height.getheight();\n  }\n\n  static returnWidth() {\n    const width = new GanttChart();\n    return width.getWidth();\n  }\n\n  static createChart(tasks) {\n    const ganttChart = new GanttChart();\n    ganttChart.createGanttChart(tasks);\n  }\n\n  static stopDrag() {\n    // Remove the event listener when the dragging stops\n    document.removeEventListener('mousemove', this.dragMoveListener);\n  }\n}"],"names":["svgNS","createGridLines","dateGroup","chartWidth","taskCount","gridLines","document","createElementNS","classList","add","appendChild","i","line","setAttribute","createMonthHeadings","dateInfo","month","months","currentMonth","monthIndex","Date","startingDate","getTime","getMonth","monthHeading","textContent","createDateScale","date","dateScale","daysOfWeek","currentDate","day","getDay","createDivDateScale","GanttChart","returnHeight","dateDiv","createElement","div","width","returnWidth","console","log","getDate","updateTaskStartEndDates","tasks","taskMap","Map","map","task","id","forEach","updateTaskDates","subTask","length","subTaskMap","subtask","subDuration","end","start","setDate","toISOString","split","updateSubTaskStartEndDate","dependencies","dependentTasks","depId","get","maxEndDate","Math","max","depTask","dependentTask","duration","tooltip","closeModal","modal","style","display","openAddModal","addModal","getElementById","body","addTaskForm","innerHTML","createFormField","saveChangesBtn","addEventListener","taskName","value","startDate","endDate","alert","newTask","name","progress","push","createChart","addTask","cancelBtn","event","preventDefault","editTask","allTasks","stopDrag","editModal","editTaskForm","editDependenciesSelect","availableTask","isTaskDependent","option","includes","selected","alltasks","editTaskNameInput","editStartDateInput","editEndDateInput","editProgress","editedTaskName","editedStartDate","editedEndDate","taskId","parseInt","getAttribute","selectedDependencies","Array","from","selectedOptions","editedTaskIndex","findIndex","saveEditedTask","labelText","inputId","inputValue","inputType","required","parentName","label","input","currentTask","otherTask","some","showTaskDetails","dependentTaskNames","dependentTaskInfo","join","left","pageX","top","pageY","hideTaskDetails","className","constructor","this","isDragging","initialX","initialWidth","isDragStart","currentTaskRect","currentProgressRect","dragMoveListener","allTask","taskBar","getTotalLength","reduce","total","createButton","button","btn_add_svg","path","createGanttChart","chartContainer","overallDiv","sideBar","svg","querySelector","updateGanttChartContent","createSVG","Datediv","insertBefore","calculateDateInfo","calculateChartWidth","createTaskBars","setTimeout","drawDependencyLine","startDates","endDates","minDate","min","maxDate","dateDiff","multiplier","customIndex","index","createSideBar","taskGroup","mainTask","dependentTaskEnd","startOffset","rect","progressWidth","progressRect","text","subTaskGroup","subIndex","subDependentTaskEnd","subStartOffset","subRect","subProgressWidth","subProgressRect","subText","startDrag","handleMouseUp","taskRect","throttle","func","limit","inThrottle","args","arguments","context","apply","isExceedingDepenentEndDate","sartDate","filter","handleDragMove","updateTaskBarPosition","clientX","taskProgressRect","parseFloat","getBoundingClientRect","getWidth","deltaX","newStartOffset","remove","updatedTaskIndex","t","newEndDate","removeEventListener","maxStartOffset","adjustedWidth","newWidth","newStartDate","removeChild","firstChild","dependencyId","find","startTaskElement","endTaskElement","x1","y1","x2","lineHorizontal","createSvgLine","isDependentAfterTask","extraHeight","lineVertical","arrowheadY","arrowDirection","arrowhead","createArrowhead","subindex","y2","x","y","size","points","sidebar","svgElement","svgWidthInPixels","window","getComputedStyle","getheight","height"],"mappings":"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"}